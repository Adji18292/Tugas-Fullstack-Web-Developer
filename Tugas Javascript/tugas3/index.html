<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Manajemen Produk</title>
</head>
<body>
    <h1 style="text-align: center;">Sistem Manajemen Produk</h1>
    <div id="notifikasi" style="text-align: center; margin-bottom: 15px; font-weight: bold;"></div>
    <div style="display: flex; justify-content: center; gap: 40px; align-items: flex-start;">
        <div style="width: 70%;">
            <h2>Daftar Produk Toko</h2>
            <table border="1" cellpadding="5" cellspacing="0" id="tabelProduk" style="width: 100%;">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nama</th>
                        <th>Harga</th>
                        <th>Stok</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody id="daftarProduk">
                </tbody>
            </table>
        </div>
        <div>
            <h2>Tambah Produk Baru</h2>
            <form id="formTambahProduk">
                <input type="text" id="namaProduk" placeholder="Nama Produk" required style="display: block; margin-bottom: 5px;"><br>
                <input type="number" id="hargaProduk" placeholder="Harga" required min="0" style="display: block; margin-bottom: 5px;"><br>
                <input type="number" id="stokProduk" placeholder="Stok" required min="0" style="display: block; margin-bottom: 5px;"><br>
                <button type="submit">Tambah Produk</button>
            </form>
        </div>
    </div>

    <script>
        let produkToko = [
           {id: 1, nama: "Laptop", harga: 7000000, stok: 5},
           {id: 2, nama: "Mouse", harga: 200000, stok: 10},
           {id: 3, nama: "Keyboard", harga: 350000, stok: 7}
        ];

        function tampilkanProduk() {
            const tbody = document.getElementById('daftarProduk');
            tbody.innerHTML = '';

            if (produkToko.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align: center;">Tidak ada produk yang tersedia.</td></tr>';
            } else {
                produkToko.forEach(produk => {
                    const baris = `
                        <tr>
                            <td style="text-align: center;">${produk.id}</td>
                            <td>${produk.nama}</td>
                            <td>Rp${produk.harga.toLocaleString('id-ID')}</td>
                            <td>${produk.stok}</td>
                            <td style="text-align: center;"><button onclick="hapusProduk(${produk.id})">Hapus</button></td>
                        </tr>
                    `;
                    tbody.innerHTML += baris;
                });
            }
        }

        function tampilkanNotifikasi(pesan, tipe = 'info') {
            const notifikasiDiv = document.getElementById('notifikasi');
            notifikasiDiv.textContent = pesan;
            notifikasiDiv.style.color = tipe === 'error' ? 'red' : 'green';
        }

        function tambahProduk(nama, harga, stok) {
            if (!nama || nama.trim() === '') {
                tampilkanNotifikasi("ERROR: Nama produk tidak boleh kosong.", 'error');
                return;
            }
            if (harga < 0 || stok < 0) {
                tampilkanNotifikasi("ERROR: Harga dan stok tidak boleh negatif.", 'error');
                return;
            }

            const idBaru = produkToko.length > 0 ? Math.max(...produkToko.map(p => p.id)) + 1 : 1;
            
            const produkBaru = {
                id: idBaru,
                nama: nama,
                harga: harga,
                stok: stok
            };

            produkToko.push(produkBaru);
            tampilkanNotifikasi(`INFO: Produk "${nama}" berhasil ditambahkan.`);
            tampilkanProduk();
        }

        function hapusProduk(id) {
            const indexProduk = produkToko.findIndex(produk => produk.id === id);

            if (indexProduk !== -1) {
                const namaProduk = produkToko[indexProduk].nama;
                produkToko.splice(indexProduk, 1);
                tampilkanNotifikasi(`INFO: Produk "${namaProduk}" (ID: ${id}) berhasil dihapus.`);
                tampilkanProduk();
            } else {
                tampilkanNotifikasi(`ERROR: Produk dengan ID ${id} tidak ditemukan.`, 'error');
            }
        }

        document.getElementById('formTambahProduk').addEventListener('submit', function(event) {
            event.preventDefault();

            const nama = document.getElementById('namaProduk').value;
            const harga = parseInt(document.getElementById('hargaProduk').value, 10);
            const stok = parseInt(document.getElementById('stokProduk').value, 10);

            tambahProduk(nama, harga, stok);

            this.reset();
        });

        tampilkanProduk();
    </script>
    
</body>
</html>